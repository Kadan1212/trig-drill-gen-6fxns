<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trig Drill Generator</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<style>
/* FRACTIONS & SQUARE ROOTS */
.frac { display:inline-block; vertical-align:middle; text-align:center; font-size:0.5em; margin:0 0.1em; }
.numer { display:table; border-bottom:0.03em solid currentColor; vertical-align:middle; }
.sqrt { margin:0 0.1em; position:relative; }
.sqrt::before { content:'√'; }
.sqrt::after { content:''; display:block; position:absolute; top:0.25em; left:0.9ch; right:0; border-top:0.03em solid currentColor; height:1px; }

/* BASE STYLES */
html,body {
  height:100%;
  width:100%;
  margin:0;
  font-family:"Open Sans",sans-serif;
  color:#333;
  background:#fbfbfb;
  --problem-n:0;
  font-size:0;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CONTAINER STATES */
body.show-intro-modal .intro-modal.not-score { display:flex; }
body.show-intro-modal .solutions { display:none; }
body.show-solutions .solutions { display:grid; }
body.show-intro-modal .problems { display:none; }
body.show-score .intro-modal.not-score { display:none; }

/* MODALS */
.intro-modal {
  position: relative;
  z-index: 10;
  box-shadow:0 3px 20px rgba(0,0,0,0.45);
  border-radius:20px;
  padding:28px;
  display:none;
  flex-direction:column;
  width:380px;
  box-sizing:border-box;
  background:white;
}
h1 { margin:0 0 12px 0; font-weight:normal; font-size:28px; }
h2 { margin:0 0 12px 0; font-weight:normal; color:#666; font-size:14px; }
#start,#menu {
  background:#2092e3;
  color:white;
  border:none;
  padding:10px;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
  width:100%;
  margin-top:10px;
}
.options { max-height:40vh; overflow:auto; margin-top:6px; }
.options p { margin:8px 0; font-size:14px; }
.options label, .options input[type=checkbox] { cursor:pointer; }

/* PROBLEMS AREA */
.problems {
  padding-top:40vh;
  margin-top:calc(var(--problem-n) * -20vh);
  transition:margin-top .2s;
  width:50vw;
  box-sizing:border-box;
}
.problem {
  font-size:14vh;
  font-family:serif;
  padding:3vh 3vw;
  width:50vw;
  min-width:50vh;
  height:20vh;
  border-right:3px solid rgba(0,0,0,0.08);
  box-sizing:border-box;
  text-align:right;
  opacity:0.5;
  position:relative;
  transition:opacity .15s, color .15s, background .15s;
}
.problem.current { opacity:1; color:#000; background:transparent; }
.answer {
  position:absolute;
  left:10px;
  top:0;
  bottom:0;
  display:flex;
  align-items:center;
  opacity:0;
  font-size:0.5em;
  transition:opacity .15s;
}
.problem.correct { color:#0a530a; }
.problem.wrong { color:#d12525; }
.problem.correct .answer, .problem.wrong .answer { opacity:1; }

/* SOLUTIONS GRID */
.solutions {
  z-index:20;
  pointer-events:auto;
  width:36vw;
  position:fixed;
  right:0;
  top:0;
  height:100%;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-auto-rows:1fr;
  gap:16px;
  padding:24px;
  box-sizing:border-box;
  align-content:center;
  justify-items:stretch;
  background:#f0f0f0; /* make visible */
}

/* SCORE MODAL */
.intro-modal.score { display:none; width:500px; }
body.show-score .intro-modal.score { display:flex; }
body.show-score .intro-modal.not-score { display:none; }

/* RESPONSIVE */
@media (max-width: 900px) {
  .intro-modal { width:320px; }
  .solutions {
    position:fixed;
    bottom:0;
    top:auto;
    width:100%;
    height:50vh;
    grid-template-columns: repeat(3,1fr);
    padding:14px;
    gap:10px;
  }
  .problems, .problem { width:100vw; min-width:0; }
}
</style>
</head>
<body class="show-intro-modal">

<div class="intro-modal not-score">
  <h1>Trig Drill Generator</h1>
  <h2>Options</h2>
  <div class="options">
    <p><input type="checkbox" id="degrees" checked> <label for="degrees">Degrees?</label></p>
    <p><input type="checkbox" id="radian" checked> <label for="radian">Radians?</label></p>
    <p><input type="checkbox" id="tan" checked> <label for="tan">Include tan?</label></p>
    <p><input type="checkbox" id="cot" checked> <label for="cot">Include cot?</label></p>
    <p><input type="checkbox" id="sec" checked> <label for="sec">Include sec?</label></p>
    <p><input type="checkbox" id="csc" checked> <label for="csc">Include csc?</label></p>
    <p><input type="checkbox" id="deg90s" checked> <label for="deg90s">Include 90° angles?</label></p>
    <p><input type="checkbox" id="deg30s" checked> <label for="deg30s">Include 30° & 60° angles?</label></p>
    <p><input type="checkbox" id="deg45s" checked> <label for="deg45s">Include 45° angles?</label></p>
    <p><input type="checkbox" id="include360" checked> <label for="include360">Include 360°?</label></p>
    <p><input type="checkbox" id="coterminal" checked> <label for="coterminal">Include coterminal angles?</label></p>
    <p><input type="checkbox" id="quadionly"> <label for="quadionly">Limit to quadrant I?</label></p>
    <p><input type="checkbox" id="showcorrectness" checked> <label for="showcorrectness">Show wrong answers?</label></p>
    <p><input type="checkbox" id="showcorrect" checked> <label for="showcorrect">Show correct answers?</label></p>
    <p><input type="checkbox" id="showtime" checked> <label for="showtime">Show time?</label></p>
    <p><input type="checkbox" id="limit20"> <label for="limit20">Limit to twenty problems?</label></p>
  </div>
  <button id="start">Start</button>
</div>

<div class="intro-modal score">
  <div id="score" class="score"></div>
  <button id="menu">Menu</button>
</div>

<div class="problems" id="problems" aria-live="polite"></div>

<div class="solutions" id="solutions">
  <div class="solution" data-answer="1">1</div>
  <div class="solution" data-answer="0">0</div>
  <div class="solution" data-answer="null">undefined</div>
  <div class="solution" data-answer="1/2">1/2</div>
  <div class="solution" data-answer="rt2/2">√2/2</div>
  <div class="solution" data-answer="rt3/2">√3/2</div>
  <div class="solution" data-answer="rt3/3">√3/3</div>
  <div class="solution" data-answer="rt3">√3</div>
  <div class="solution" data-answer="rt2">√2</div>
  <div class="solution" data-answer="2">2</div>
  <div class="solution" data-answer="1/3">1/3</div>
  <div class="solution" data-answer="3/2">3/2</div>
  <div class="solution" data-answer="2rt3/3">2√3/3</div>
</div>

<div class="clock" id="clock">3:00</div>

<script>
// --- all previous functionality (start, menu, generate problems, submitAnswer) ---
const checkboxes = {
  useDegrees: document.getElementById('degrees'),
  radians: document.getElementById('radian'),
  tan: document.getElementById('tan'),
  cot: document.getElementById('cot'),
  sec: document.getElementById('sec'),
  csc: document.getElementById('csc'),
  deg90s: document.getElementById('deg90s'),
  deg30s: document.getElementById('deg30s'),
  deg45s: document.getElementById('deg45s'),
  include360: document.getElementById('include360'),
  coterminal: document.getElementById('coterminal'),
  quadIOnly: document.getElementById('quadionly'),
  showCorrectness: document.getElementById('showcorrectness'),
  showCorrect: document.getElementById('showcorrect'),
  showTime: document.getElementById('showtime'),
  limit20: document.getElementById('limit20')
};
const problemsWrapper = document.getElementById('problems');
const solutions = document.getElementById('solutions');
const scoreEl = document.getElementById('score');
const clock = document.getElementById('clock');
let problems = [], current = 0, rights = 0, wrongs = 0, playing = false, startTime = 0, clockRAF = null;

// --- all functions from before, unchanged, including generateDrill(), getAnswers(), invert(), renderProblems(), submitAnswer(), startClock(), stopClock() ---
// [For brevity here I’m indicating you just reuse all previous JS exactly as you had it before]

document.getElementById('start').addEventListener('click', () => {
  // Collect options
  const opts = {};
  Object.keys(checkboxes).forEach(k => opts[k] = checkboxes[k].checked);

  problems = generateDrill({
    useDegrees: opts.useDegrees,
    radians: opts.radians,
    includeTan: opts.tan,
    includeCot: opts.cot,
    includeSec: opts.sec,
    includeCsc: opts.csc,
    deg90s: opts.deg90s,
    deg30s: opts.deg30s,
    deg45s: opts.deg45s,
    include360: opts.include360,
    coterminal: opts.coterminal,
    quadIOnly: opts.quadIOnly
  });

  if (opts.limit20) problems = problems.slice(0,20);
  if (!problems.length) { alert('No problems!'); return; }

  current = rights = wrongs = 0;
  renderProblems();
  document.body.classList.remove('show-intro-modal','show-score');
  document.body.classList.add('show-solutions');
  startTime = Date.now(); startClock();
});

// Menu button
document.getElementById('menu').addEventListener('click', () => {
  document.body.classList.remove('show-score','show-solutions');
  document.body.classList.add('show-intro-modal');
  problemsWrapper.innerHTML = '';
});
</script>
</body>
</html>
